{% extends 'base.html' %}
{% block title %}Mark Attendance{% endblock %}
{% block content %}
<h2 class="text-2xl font-bold mb-6">Mark Attendance</h2>

<div class="bg-white rounded shadow p-6 max-w-md">
  <div class="mb-4">
    <div class="text-sm text-gray-600">Course</div>
    <div class="font-semibold">
      {{ session.section.course.code }} — {{ session.section.course.title }}
      <span class="text-gray-500">· {{ session.section.section_code }}</span>
    </div>
  </div>
  <div class="mb-6 grid grid-cols-2 gap-4 text-sm text-gray-700">
    <div>
      <div class="text-gray-500">Scheduled Start</div>
      <div class="font-medium">{{ session.scheduled_start.strftime('%Y-%m-%d %H:%M') }}</div>
    </div>
    <div>
      <div class="text-gray-500">Scheduled End</div>
      <div class="font-medium">{{ session.scheduled_end.strftime('%Y-%m-%d %H:%M') }}</div>
    </div>
  </div>

  {% if already_marked %}
    <div class="p-3 mb-4 rounded bg-green-50 text-green-800">
      Attendance already recorded for this session.
    </div>
    <div class="flex gap-2">
      <a href="{{ url_for('student.student_sessions') }}" class="px-4 py-2 rounded border text-blue-700 border-blue-700 hover:bg-blue-50">Back to Sessions</a>
    </div>
  {% else %}
    <form method="post" class="space-y-4">
      <div>
        <label for="code" class="block text-sm font-medium mb-1">6-digit Code</label>
        <input id="code"
               name="code"
               maxlength="6"
               pattern="[0-9]{6}"
               inputmode="numeric"
               class="border rounded px-3 py-2 w-full tracking-widest text-lg"
               placeholder="000000"
               value="{{ prefill_code or '' }}"
               required>
        <p class="text-xs text-gray-500 mt-1">Enter the code shown by your lecturer. Only digits.</p>
      </div>
      <div class="flex gap-2">
        <button type="submit" class="bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-900">Submit</button>
        <a href="{{ url_for('student.student_sessions') }}" class="px-4 py-2 rounded border text-blue-700 border-blue-700 hover:bg-blue-50">Back</a>
      </div>
    </form>
  {% endif %}
</div>
{% endblock %}